<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>input自动聚焦</title>
</head>
<link rel="stylesheet" href="../css/weui.css" />

<body>
    <div id="demo">
        <div class="weui-search-bar" id="search_bar " :class="{'weui-search-bar_focusing':isShow}">
            <!-- 问题1. 为什么class里面取非后要反向选择;    注意 :class关系式里面最好不要取非;-->
            <form class="weui-search-bar__form">
                <div class="weui-search-bar__box">
                    <i class="weui-icon-search"></i>
                    <input type="search" class="weui-search-bar__input" id="search_input" placeholder="搜索" / v-model="search">
                    <a href="javascript:" class="weui-icon-clear" id="search_clear" @click="clear()" v-focuss></a>
                </div>
                <label for="search_input" class="weui-search-bar__label" id="search_text" @click="isShow = true">
                    <i class="weui-icon-search"></i>
                    <span>搜索</span>
                </label>
            </form>
            <a href="javascript:" class="weui-search-bar__cancel-btn" id="search_cancel" @click="isShow = false">取消</a>
        </div>
    </div>
</body>
<script src="../js/vue2.js"></script>
<script>

//第一种简单写法;
Vue.directive("focuss", function(ele, attr) {
    //点击叉后自动聚焦;
    ele.addEventListener("click", function() {
        document.getElementById("search_input").focus();
    })
})

var vue = new Vue({
    el: "#demo",
    data: {
        isShow: false,
        search: ''
    },
    methods: {
        clear: function() {
            this.search = ''
        }
    }
})

 
/*//第二种写法
Vue.directive("focuss", {
    bind: function(el, binding, vnode) {
        console.log("绑定时");
        el.addEventListener("click", function() {
            //获取传入v-focuss:wscats来的wscats值
            console.log(binding.arg);
            //传入指令的值
            console.log(binding.value.params);
            //执行传给指令的clear函数
            binding.value.fn();
            //让输入框聚焦
            document.getElementById("search").focus();
        })
    },
    inserted: function(el) {
        console.log("插入页面时");
    },
    update: function(el, binding, vnode) {
        console.log("页面更新时")
    },
    componentUpdated: function(el) {
        console.log("组件更新时");
    },
    unbind: function(el) {
        console.log("解绑时");
    }
})

var vue = new Vue({
    el: "#demo",
    data: {
        isShow: false,
        search: ''
    },
    methods: {
        clear: function() {
            this.search = ''
        }
    }
})*/
</script>

</html>
